(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Flow"],{"0bca":function(t,e,i){},"508c":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flow-list-search",attrs:{id:"flow-list-search"}},[i("van-form",{on:{submit:t.onSubmit}},[i("div",{staticClass:"round-corner"},[i("van-field",{attrs:{autofocus:"",name:"标题",label:"标题",placeholder:"事项标题"},model:{value:t.searchJson.title,callback:function(e){t.$set(t.searchJson,"title",e)},expression:"searchJson.title"}}),t.receive?i("van-field",{attrs:{name:"姓名",label:"姓名",placeholder:"发起人姓名"},model:{value:t.searchJson.starterName,callback:function(e){t.$set(t.searchJson,"starterName",e)},expression:"searchJson.starterName"}}):t._e(),t.receive?i("van-field",{attrs:{name:"学工号",label:"学工号",placeholder:"发起人学工号"},model:{value:t.searchJson.starter,callback:function(e){t.$set(t.searchJson,"starter",e)},expression:"searchJson.starter"}}):t._e(),t.draft?t._e():[i("van-field",{attrs:{readonly:"",clickable:"",name:"calendar",value:t.parsedDate,label:"日期",placeholder:"发起日期区间"},on:{click:function(e){t.showCalendar=!0}}}),i("van-calendar",{attrs:{type:"range",color:"#3fb0fb","min-date":new Date("1970/01/01")},on:{confirm:t.onCalenderConfirm},model:{value:t.showCalendar,callback:function(e){t.showCalendar=e},expression:"showCalendar"}})],t.draft?t._e():[i("van-field",{attrs:{name:"radio",label:"状态"},scopedSlots:t._u([{key:"input",fn:function(){return[i("van-radio-group",{attrs:{direction:"horizontal"},model:{value:t.searchJson.cooperative_tstatus,callback:function(e){t.$set(t.searchJson,"cooperative_tstatus",e)},expression:"searchJson.cooperative_tstatus"}},t._l(t.statusArr,(function(e,n){return i("van-radio",{key:n,attrs:{name:e.id}},[t._v(" "+t._s(e.text)+" ")])})),1)]},proxy:!0}],null,!1,3480027019)})]],2),i("div",{staticStyle:{margin:"16px"}},[i("van-button",{attrs:{block:"",type:"info","native-type":"submit"}},[t._v("搜索")])],1)])],1)},a=[],r=(i("e260"),i("ddb0"),i("c625"),i("b650")),s=(i("9eda"),i("565f")),o=(i("3cd0"),i("1812"),i("1a44"),i("acc2"),i("5e5e"),i("25bb"),i("968a"),i("7f98"),i("fb78"),i("90c6"));function l(t){return"[object Date]"===Object.prototype.toString.call(t)&&!Object(o["a"])(t.getTime())}var c=i("a8c1"),h=i("d282"),u=Object(h["a"])("calendar"),d=u[0],f=u[1],m=u[2],p=64;function v(t){return m("monthTitle",t.getFullYear(),t.getMonth()+1)}function g(t,e){var i=t.getFullYear(),n=e.getFullYear(),a=t.getMonth(),r=e.getMonth();return i===n?a===r?0:a>r?1:-1:i>n?1:-1}function b(t,e){var i=g(t,e);if(0===i){var n=t.getDate(),a=e.getDate();return n===a?0:n>a?1:-1}return i}function y(t,e){return t=new Date(t),t.setDate(t.getDate()+e),t}function D(t){return y(t,-1)}function w(t){return y(t,1)}function k(t){var e=t[0].getTime(),i=t[1].getTime();return(i-e)/864e5+1}function S(t){return Array.isArray(t)?t.map((function(t){return null===t?t:new Date(t)})):new Date(t)}var x=i("e41f"),C=i("d399");function I(t,e){return 32-new Date(t,e-1,32).getDate()}var O=Object(h["a"])("calendar-month"),$=O[0],B=$({props:{date:Date,type:String,color:String,minDate:Date,maxDate:Date,showMark:Boolean,rowHeight:[Number,String],formatter:Function,currentDate:[Date,Array],allowSameDay:Boolean,showSubtitle:Boolean,showMonthTitle:Boolean},data:function(){return{visible:!1}},computed:{title:function(){return v(this.date)},offset:function(){return this.date.getDay()},totalDay:function(){return I(this.date.getFullYear(),this.date.getMonth()+1)},monthStyle:function(){if(!this.visible){var t=Math.ceil((this.totalDay+this.offset)/7)*this.rowHeight;return{paddingBottom:t+"px"}}},days:function(){for(var t=[],e=this.date.getFullYear(),i=this.date.getMonth(),n=1;n<=this.totalDay;n++){var a=new Date(e,i,n),r=this.getDayType(a),s={date:a,type:r,text:n,bottomInfo:this.getBottomInfo(r)};this.formatter&&(s=this.formatter(s)),t.push(s)}return t}},mounted:function(){this.height=this.$el.getBoundingClientRect().height},methods:{scrollIntoView:function(){this.showSubtitle?this.$refs.days.scrollIntoView():this.$refs.month.scrollIntoView()},getMultipleDayType:function(t){var e=this,i=function(t){return e.currentDate.some((function(e){return 0===b(e,t)}))};if(i(t)){var n=D(t),a=w(t),r=i(n),s=i(a);return r&&s?"multiple-middle":r?"end":s?"start":"multiple-selected"}return""},getRangeDayType:function(t){var e=this.currentDate,i=e[0],n=e[1];if(!i)return"";var a=b(t,i);if(!n)return 0===a?"start":"";var r=b(t,n);return 0===a&&0===r&&this.allowSameDay?"start-end":0===a?"start":0===r?"end":a>0&&r<0?"middle":void 0},getDayType:function(t){var e=this.type,i=this.minDate,n=this.maxDate,a=this.currentDate;return b(t,i)<0||b(t,n)>0?"disabled":"single"===e?0===b(t,a)?"selected":"":"multiple"===e?this.getMultipleDayType(t):"range"===e?this.getRangeDayType(t):void 0},getBottomInfo:function(t){if("range"===this.type){if("start"===t||"end"===t)return m(t);if("start-end"===t)return m("startEnd")}},getDayStyle:function(t,e){var i={};return 0===e&&(i.marginLeft=100*this.offset/7+"%"),this.rowHeight!==p&&(i.height=this.rowHeight+"px"),this.color&&("start"===t||"end"===t||"multiple-selected"===t||"multiple-middle"===t?i.background=this.color:"middle"===t&&(i.color=this.color)),i},genTitle:function(){var t=this.$createElement;if(this.showMonthTitle)return t("div",{class:f("month-title")},[this.title])},genMark:function(){var t=this.$createElement;if(this.showMark)return t("div",{class:f("month-mark")},[this.date.getMonth()+1])},genDays:function(){var t=this.$createElement;return this.visible?t("div",{ref:"days",attrs:{role:"grid"},class:f("days")},[this.genMark(),this.days.map(this.genDay)]):t("div",{ref:"days"})},genDay:function(t,e){var i=this,n=this.$createElement,a=t.type,r=t.topInfo,s=t.bottomInfo,o=this.getDayStyle(a,e),l="disabled"===a,c=function(){l||i.$emit("click",t)},h=r&&n("div",{class:f("top-info")},[r]),u=s&&n("div",{class:f("bottom-info")},[s]);return"selected"===a?n("div",{attrs:{role:"gridcell",tabindex:-1},style:o,class:[f("day"),t.className],on:{click:c}},[n("div",{class:f("selected-day"),style:{background:this.color}},[h,t.text,u])]):n("div",{attrs:{role:"gridcell",tabindex:l?null:-1},style:o,class:[f("day",a),t.className],on:{click:c}},[h,t.text,u])}},render:function(){var t=arguments[0];return t("div",{class:f("month"),ref:"month",style:this.monthStyle},[this.genTitle(),this.genDays()])}}),T=Object(h["a"])("calendar-header"),j=T[0],M=j({props:{title:String,subtitle:String,showTitle:Boolean,showSubtitle:Boolean},methods:{genTitle:function(){var t=this.$createElement;if(this.showTitle){var e=this.slots("title")||this.title||m("title");return t("div",{class:f("header-title")},[e])}},genSubtitle:function(){var t=this.$createElement;if(this.showSubtitle)return t("div",{class:f("header-subtitle")},[this.subtitle])},genWeekDays:function(){var t=this.$createElement,e=m("weekdays");return t("div",{class:f("weekdays")},[e.map((function(e){return t("span",{class:f("weekday")},[e])}))])}},render:function(){var t=arguments[0];return t("div",{class:f("header")},[this.genTitle(),this.genSubtitle(),this.genWeekDays()])}}),F=d({props:{title:String,color:String,value:Boolean,formatter:Function,confirmText:String,rangePrompt:String,defaultDate:[Date,Array],getContainer:[String,Function],allowSameDay:Boolean,closeOnPopstate:Boolean,confirmDisabledText:String,type:{type:String,default:"single"},minDate:{type:Date,validator:l,default:function(){return new Date}},maxDate:{type:Date,validator:l,default:function(){var t=new Date;return new Date(t.getFullYear(),t.getMonth()+6,t.getDate())}},position:{type:String,default:"bottom"},rowHeight:{type:[Number,String],default:p},round:{type:Boolean,default:!0},poppable:{type:Boolean,default:!0},showMark:{type:Boolean,default:!0},showTitle:{type:Boolean,default:!0},showConfirm:{type:Boolean,default:!0},showSubtitle:{type:Boolean,default:!0},safeAreaInsetBottom:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0},maxRange:{type:[Number,String],default:null}},data:function(){return{subtitle:"",currentDate:this.getInitialDate()}},computed:{months:function(){var t=[],e=new Date(this.minDate);e.setDate(1);do{t.push(new Date(e)),e.setMonth(e.getMonth()+1)}while(1!==g(e,this.maxDate));return t},buttonDisabled:function(){var t=this.type,e=this.currentDate;return"range"===t?!e[0]||!e[1]:"multiple"===t?!e.length:!e}},watch:{type:"reset",value:"init",defaultDate:function(t){this.currentDate=t,this.scrollIntoView()}},mounted:function(){this.init()},activated:function(){this.init()},methods:{reset:function(){this.currentDate=this.getInitialDate(),this.scrollIntoView()},init:function(){var t=this;this.poppable&&!this.value||(this.$nextTick((function(){t.bodyHeight=Math.floor(t.$refs.body.getBoundingClientRect().height),t.onScroll()})),this.scrollIntoView())},scrollIntoView:function(){var t=this;this.$nextTick((function(){var e=t.currentDate,i="single"===t.type?e:e[0],n=t.value||!t.poppable;i&&n&&t.months.some((function(e,n){return 0===g(e,i)&&(t.$refs.months[n].scrollIntoView(),!0)}))}))},getInitialDate:function(){var t=this.type,e=this.minDate,i=this.maxDate,n=this.defaultDate,a=new Date;if(-1===b(a,e)?a=e:1===b(a,i)&&(a=i),"range"===t){var r=n||[],s=r[0],o=r[1];return[s||a,o||w(a)]}return"multiple"===t?n||[a]:n||a},onScroll:function(){var t=this.$refs,e=t.body,i=t.months,n=Object(c["c"])(e),a=n+this.bodyHeight,r=i.map((function(t){return t.height})),s=r.reduce((function(t,e){return t+e}),0);if(!(n<0||a>s&&n>0)){for(var o,l=0,h=0;h<i.length;h++){var u=l<=a&&l+r[h]>=n;u&&!o&&(o=i[h]),i[h].visible=u,l+=r[h]}o&&(this.subtitle=o.title)}},onClickDay:function(t){var e=t.date,i=this.type,n=this.currentDate;if("range"===i){var a=n[0],r=n[1];if(a&&!r){var s=b(e,a);1===s?this.select([a,e],!0):-1===s?this.select([e,null]):this.allowSameDay&&this.select([e,e])}else this.select([e,null])}else if("multiple"===i){var o,l=this.currentDate.some((function(t,i){var n=0===b(t,e);return n&&(o=i),n}));l?n.splice(o,1):this.select([].concat(n,[e]))}else this.select(e,!0)},togglePopup:function(t){this.$emit("input",t)},select:function(t,e){var i=this,n=function(t){i.currentDate=t,i.$emit("select",S(i.currentDate))};if(e&&"range"===this.type){var a=this.checkRange(t);if(!a)return void(this.showConfirm?n([t[0],y(t[0],this.maxRange-1)]):n(t))}n(t),e&&!this.showConfirm&&this.onConfirm()},checkRange:function(t){var e=this.maxRange,i=this.rangePrompt;return!(e&&k(t)>e)||(Object(C["a"])(i||m("rangePrompt",e)),!1)},onConfirm:function(){this.$emit("confirm",S(this.currentDate))},genMonth:function(t,e){var i=this.$createElement,n=0!==e||!this.showSubtitle;return i(B,{ref:"months",refInFor:!0,attrs:{date:t,type:this.type,color:this.color,minDate:this.minDate,maxDate:this.maxDate,showMark:this.showMark,formatter:this.formatter,rowHeight:this.rowHeight,currentDate:this.currentDate,showSubtitle:this.showSubtitle,allowSameDay:this.allowSameDay,showMonthTitle:n},on:{click:this.onClickDay}})},genFooterContent:function(){var t=this.$createElement,e=this.slots("footer");if(e)return e;if(this.showConfirm){var i=this.buttonDisabled?this.confirmDisabledText:this.confirmText;return t(r["a"],{attrs:{round:!0,block:!0,type:"danger",color:this.color,disabled:this.buttonDisabled,nativeType:"button"},class:f("confirm"),on:{click:this.onConfirm}},[i||m("confirm")])}},genFooter:function(){var t=this.$createElement;return t("div",{class:f("footer",{unfit:!this.safeAreaInsetBottom})},[this.genFooterContent()])},genCalendar:function(){var t=this,e=this.$createElement;return e("div",{class:f()},[e(M,{attrs:{title:this.title,showTitle:this.showTitle,subtitle:this.subtitle,showSubtitle:this.showSubtitle},scopedSlots:{title:function(){return t.slots("title")}}}),e("div",{ref:"body",class:f("body"),on:{scroll:this.onScroll}},[this.months.map(this.genMonth)]),this.genFooter()])}},render:function(){var t=this,e=arguments[0];if(this.poppable){var i,n=function(e){return function(){return t.$emit(e)}};return e(x["a"],{attrs:(i={round:!0,value:this.value},i["round"]=this.round,i["position"]=this.position,i["closeable"]=this.showTitle||this.showSubtitle,i["getContainer"]=this.getContainer,i["closeOnPopstate"]=this.closeOnPopstate,i["closeOnClickOverlay"]=this.closeOnClickOverlay,i),class:f("popup"),on:{input:this.togglePopup,open:n("open"),opened:n("opened"),close:n("close"),closed:n("closed")}},[this.genCalendar()])}return this.genCalendar()}}),J=(i("ce04"),i("ad06")),A={inject:{vanField:{default:null}},watch:{value:function(){var t=this.vanField;t&&(t.resetValidation(),t.validateWithTrigger("onChange"))}},created:function(){var t=this.vanField;t&&!t.children&&(t.children=this)}},E=i("9884"),L=i("ea8e"),P=function(t){var e=t.parent,i=t.bem,n=t.role;return{mixins:[Object(E["a"])(e),A],props:{name:null,value:null,disabled:Boolean,iconSize:[Number,String],checkedColor:String,labelPosition:String,labelDisabled:Boolean,shape:{type:String,default:"round"},bindGroup:{type:Boolean,default:!0}},computed:{disableBindRelation:function(){return!this.bindGroup},isDisabled:function(){return this.parent&&this.parent.disabled||this.disabled},direction:function(){return this.parent&&this.parent.direction||null},iconStyle:function(){var t=this.checkedColor||this.parent&&this.parent.checkedColor;if(t&&this.checked&&!this.isDisabled)return{borderColor:t,backgroundColor:t}},tabindex:function(){return this.isDisabled||"radio"===n&&!this.checked?-1:0}},methods:{onClick:function(t){var e=this,i=t.target,n=this.$refs.icon,a=n===i||n.contains(i);this.isDisabled||!a&&this.labelDisabled?this.$emit("click",t):(this.toggle(),setTimeout((function(){e.$emit("click",t)})))},genIcon:function(){var t=this.$createElement,e=this.checked,n=this.iconSize||this.parent&&this.parent.iconSize;return t("div",{ref:"icon",class:i("icon",[this.shape,{disabled:this.isDisabled,checked:e}]),style:{fontSize:Object(L["a"])(n)}},[this.slots("icon",{checked:e})||t(J["a"],{attrs:{name:"success"},style:this.iconStyle})])},genLabel:function(){var t=this.$createElement,e=this.slots();if(e)return t("span",{class:i("label",[this.labelPosition,{disabled:this.isDisabled}])},[e])}},render:function(){var t=arguments[0],e=[this.genIcon()];return"left"===this.labelPosition?e.unshift(this.genLabel()):e.push(this.genLabel()),t("div",{attrs:{role:n,tabindex:this.tabindex,"aria-checked":String(this.checked)},class:i([{disabled:this.isDisabled,"label-disabled":this.labelDisabled},this.direction]),on:{click:this.onClick}},[e])}}},_=Object(h["a"])("radio"),H=_[0],N=_[1],R=H({mixins:[P({bem:N,role:"radio",parent:"vanRadio"})],computed:{currentValue:{get:function(){return this.parent?this.parent.value:this.value},set:function(t){(this.parent||this).$emit("input",t)}},checked:function(){return this.currentValue===this.name}},methods:{toggle:function(){this.currentValue=this.name}}}),V=(i("6f08"),Object(h["a"])("radio-group")),U=V[0],K=V[1],z=U({mixins:[Object(E["b"])("vanRadio"),A],props:{value:null,disabled:Boolean,direction:String,checkedColor:String,iconSize:[Number,String]},watch:{value:function(t){this.$emit("change",t)}},render:function(){var t=arguments[0];return t("div",{class:K([this.direction]),attrs:{role:"radiogroup"}},[this.slots()])}}),Y=i("db85"),W=Object(h["a"])("form"),q=W[0],G=W[1],Q=q({props:{colon:Boolean,labelWidth:[Number,String],labelAlign:String,inputAlign:String,scrollToError:Boolean,validateFirst:Boolean,errorMessageAlign:String,validateTrigger:{type:String,default:"onBlur"},showError:{type:Boolean,default:!0},showErrorMessage:{type:Boolean,default:!0}},provide:function(){return{vanForm:this}},data:function(){return{fields:[]}},methods:{validateSeq:function(){var t=this;return new Promise((function(e,i){var n=[];t.fields.reduce((function(t,e){return t.then((function(){if(!n.length)return e.validate().then((function(t){t&&n.push(t)}))}))}),Promise.resolve()).then((function(){n.length?i(n):e()}))}))},validateAll:function(){var t=this;return new Promise((function(e,i){Promise.all(t.fields.map((function(t){return t.validate()}))).then((function(t){t=t.filter((function(t){return t})),t.length?i(t):e()}))}))},validate:function(t){return t?this.validateField(t):this.validateFirst?this.validateSeq():this.validateAll()},validateField:function(t){var e=this.fields.filter((function(e){return e.name===t}));return e.length?new Promise((function(t,i){e[0].validate().then((function(e){e?i(e):t()}))})):Promise.reject()},resetValidation:function(t){this.fields.forEach((function(e){t&&e.name!==t||e.resetValidation()}))},scrollToField:function(t){this.fields.forEach((function(e){e.name===t&&e.$el.scrollIntoView()}))},addField:function(t){this.fields.push(t),Object(Y["a"])(this.fields,this)},removeField:function(t){this.fields=this.fields.filter((function(e){return e!==t}))},getValues:function(){return this.fields.reduce((function(t,e){return t[e.name]=e.formValue,t}),{})},onSubmit:function(t){t.preventDefault(),this.submit()},submit:function(){var t=this,e=this.getValues();this.validate().then((function(){t.$emit("submit",e)})).catch((function(i){t.$emit("failed",{values:e,errors:i}),t.scrollToError&&t.scrollToField(i[0].name)}))}},render:function(){var t=arguments[0];return t("form",{class:G(),on:{submit:this.onSubmit}},[this.slots()])}}),X=i("dd6f"),Z=i("05e6"),tt={name:"FlowListSearch",components:{[Q.name]:Q,[z.name]:z,[R.name]:R,[F.name]:F,[s["a"].name]:s["a"],[r["a"].name]:r["a"]},props:["type","flowKey"],data(){return{searchJson:{title:"",starter:"",starterName:"",starterUnit:"",cooperative_tstatus:"",formDate:"",toDate:""},showCalendar:!1}},computed:{receive(){return/^(todo|done|copy)$/.test(this.type)},send(){return/^(ongoing|end)$/.test(this.type)},draft(){return"draft"==this.type},parsedDate(){if(!this.searchJson.formDate||!this.searchJson.toDate)return"";var t=Object(X["a"])(this.searchJson.formDate,"yyyy-MM-dd"),e=Object(X["a"])(this.searchJson.toDate,"yyyy-MM-dd");return"".concat(t,"至").concat(e)},statusArr(){var t=[{id:"",text:"全部"},{id:"send",text:"进行中"},{id:"end",text:"已办结"},{id:"finish",text:"已中止"},{id:"back",text:"已退回"},{id:"draft",text:"已撤回"},{id:"revoke",text:"已撤销"}],e=[];switch(this.type){case"todo":case"ongoing":e=[t[0],t[1],t[4]];break;case"done":e=[t[0],t[1],t[2],t[3],t[4],t[5]];break;case"copy":e=[t[0],t[1],t[2],t[3],t[4],t[6]];break;case"end":e=[t[0],t[2],t[3],t[6]];break}return e}},created(){},methods:{onCalenderConfirm(t){var[e,i]=t,n="yyyy-MM-dd'T'HH:mm:ss";this.showCalendar=!1,this.searchJson.formDate=Object(X["a"])(e,n),this.searchJson.toDate=Object(X["a"])(i,n)},onSubmit(){this.$router.push({name:Z["d"],params:{type:this.type,flowKey:this.flowKey,searchJson:encodeURIComponent(JSON.stringify(this.searchJson))}})}}},et=tt,it=(i("7bdf"),i("2877")),nt=Object(it["a"])(et,n,a,!1,null,"5b9ef2d0",null);e["default"]=nt.exports},"5dd7":function(t,e,i){},"6f08":function(t,e,i){},"7bdf":function(t,e,i){"use strict";var n=i("c580"),a=i.n(n);a.a},"9eda":function(t,e,i){"use strict";i("3cd0"),i("1a44"),i("acc2"),i("01f7"),i("7f75")},baa5:function(t,e,i){var n=i("23e7"),a=i("e58c");n({target:"Array",proto:!0,forced:a!==[].lastIndexOf},{lastIndexOf:a})},c580:function(t,e,i){},ce04:function(t,e,i){},ce16:function(t,e,i){"use strict";var n=i("0bca"),a=i.n(n);a.a},d116:function(t,e,i){"use strict";var n=i("5dd7"),a=i.n(n);a.a},d36a:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flow-list ht-scroll-vertical",class:t.mixinPageStatusClass,attrs:{id:"flow-list"}},[i("form",{attrs:{action:"/"}},[i("van-search",{attrs:{disabled:"",background:"#f5f5f5",placeholder:"点击搜索"},on:{click:t.onSearchClick}})],1),t.innerSearchJson?i("div",{staticClass:"ht-text-assist",staticStyle:{"margin-bottom":"10px","text-align":"center"},on:{click:t.onResetSearchClick}},[t._v(" 点击显示全部 ")]):t._e(),i("van-list",{staticStyle:{padding:"0 15px"},attrs:{finished:t.finished,"finished-text":"没有更多了",error:t.error,"error-text":"请求失败，点击重新加载"},on:{"update:error":function(e){t.error=e},load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,(function(e,n){return i("FlowListItem",{key:n,attrs:{type:t.type,item:e},on:{delete:t.deleteHandler}})})),1)],1)},a=[],r=(i("e6cf"),i("a79d"),i("5319"),i("b342"),i("ad06")),s=(i("1fe9"),i("d961")),o=(i("93b0"),i("2bdd")),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flow-list-item round-corner"},[i("Panel",{attrs:{img:t.mixinUtil.getAvatarUrlByUUID(t.item.starterUUID),title:t.item.title,tagArr:t.tagArr,descArr:t.descArr,btnArr:t.btnArr,foldDesc:!0},on:{btnDetailClick:t.btnDetailClickHandler,btnDeleteClick:t.btnDeleteClickHandler}})],1)},c=[],h=(i("baa5"),i("433b"),i("d399")),u=(i("47e2"),i("2241")),d=i("dd6f"),f=i("1504"),m=i("78c4"),p=(t,e,i,n)=>{var a={draft:"cooperativeInst/primedList.htm",send:"cooperativeInst/haveHairList.htm",ongoing:"cooperativeInst/haveHairList.htm",end:"cooperativeInst/haveHairList.htm",todo:"cooperativeInst/toDoList.htm",done:"cooperativeInst/haveToDoList.htm",copy:"cooperativeInst/makeCopeList.htm",reply:"cooperativeInst/newReplayList.htm"};n&&(n=decodeURIComponent(n));var r={searchJson:n,tStatus:t,flowKey:e,pageIndex:i,pageSize:20};return Object(m["a"])(a[t],r)},v=t=>Object(m["a"])("cooperative/deleteCooperative.htm",{ids:t}),g={name:"FlowListItem",components:{Panel:f["a"]},props:["type","item"],data(){return{}},computed:{tagArr(){var t={};switch(this.item.tStatus){case"end":t.text="已办结",t.color="#666";break;case"send":t.text="进行中",t.color="#04be02";break;case"finish":t.text="已中止",t.color="#4F4A81";break;case"back":t.text="已退回",t.color="#ef4f4f";break;case"draft":t.text="草稿",t.color="#deb887";break;case"revoke":case"haverevoke":t.text="已撤销",t.color="#947286";break}return[t]},descArr(){var t=[];if(t.push({key:"",value:"".concat(this.item.starterName,"发起于").concat(this.item.startTime)}),this.item.lastOperName&&(t.push({key:"最新操作人",value:this.item.lastOperName}),t.push({key:"操作时间",value:this.item.opdate})),this.item.wfContent)try{var e=JSON.parse(this.item.wfContent);e=Object(d["c"])(e),e.forEach(e=>t.push({key:e.cnfield,value:e.value}))}catch(i){console.warn(i)}return t},btnArr(){var t=[];return t.push({text:"查看详情",event:"btnDetailClick"}),/^(ongoing|end|draft)$/.test(this.type)&&/^(finish|revoke|haverevoke|back|draft)$/.test(this.item.tStatus)&&t.push({text:"删除",event:"btnDeleteClick"}),t}},mounted(){},methods:{btnDetailClickHandler(){if("draft"==this.item.tStatus&&"pub"==this.item.tType){var t=window.location.href.lastIndexOf("draft")+6,e=window.location.href.substr(t);this.mixinUtil.jump("weixin/weui/cooperate.html#new/form/draft/".concat(e,"/").concat(this.item.id))}else"draft"==this.item.tStatus?this.mixinUtil.jump("weixin/weui/cooperate.html#detail/".concat(this.item.id)+"/draft"):this.mixinUtil.jump("weixin/weui/cooperate.html#detail/".concat(this.item.id))},btnDeleteClickHandler(){u["a"].confirm({message:"确定要删除这个事项吗？"}).then(()=>v(this.item.id)).then(()=>{this.$emit("delete",this.item.id),Object(h["a"])("删除成功")})}}},b=g,y=(i("d116"),i("2877")),D=Object(y["a"])(b,l,c,!1,null,"7efd531c",null),w=D.exports,k=i("05e6"),S=i("cd8b"),x={name:"FlowList",components:{[o["a"].name]:o["a"],[s["a"].name]:s["a"],[r["a"].name]:r["a"],FlowListItem:w},props:["type","flowKey","searchJson"],data(){return{list:[],loading:!1,finished:!1,error:!1,pageIndex:0,innerSearchJson:""}},computed:{},created(){var t={send:"已发",todo:"待办事项",done:"已办事项",copy:"抄送给我",reply:"最新回复",draft:"草稿箱",ongoing:"进行中",end:"已结束"};Object(S["a"])().then(e=>e.setTitle(t[this.type])),this.mixinShowLoading(),this.innerSearchJson=this.searchJson},methods:{onLoad(){p(this.type,this.flowKey,this.pageIndex,this.innerSearchJson).then(t=>{this.list=this.list.concat(t.data),this.list.length>=t.total&&(this.finished=!0),t.total||this.mixinPageEmpty(),this.pageIndex++,this.loading=!1}).catch(t=>{this.loading=!1,this.error=!0,this.mixinPageNetError()}).finally(()=>{this.mixinClearLoading()})},deleteHandler(t){this.list=this.list.filter(e=>e.id!=t)},onSearchClick(){this.$router.push({name:k["e"],params:{type:this.type,flowKey:this.flowKey}})},onResetSearchClick(){this.$router.replace({name:k["d"],params:{type:this.type,flowKey:this.flowKey}}),this.mixinShowLoading(),this.loading=!1,this.finished=!1,this.error=!1,this.pageIndex=0,this.innerSearchJson="",this.list=[],this.onLoad()}}},C=x,I=(i("ce16"),Object(y["a"])(C,n,a,!1,null,"5e8cd354",null));e["default"]=I.exports},e41f:function(t,e,i){"use strict";var n=i("d282"),a=i("a142"),r=i("6605"),s=i("ad06"),o=Object(n["a"])("popup"),l=o[0],c=o[1];e["a"]=l({mixins:[Object(r["a"])()],props:{round:Boolean,duration:[Number,String],closeable:Boolean,transition:String,safeAreaInsetBottom:Boolean,closeIcon:{type:String,default:"cross"},closeIconPosition:{type:String,default:"top-right"},position:{type:String,default:"center"},overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0}},beforeCreate:function(){var t=this,e=function(e){return function(i){return t.$emit(e,i)}};this.onClick=e("click"),this.onOpened=e("opened"),this.onClosed=e("closed")},render:function(){var t,e=arguments[0];if(this.shouldRender){var i=this.round,n=this.position,r=this.duration,o="center"===n,l=this.transition||(o?"van-fade":"van-popup-slide-"+n),h={};if(Object(a["b"])(r)){var u=o?"animationDuration":"transitionDuration";h[u]=r+"s"}return e("transition",{attrs:{name:l},on:{afterEnter:this.onOpened,afterLeave:this.onClosed}},[e("div",{directives:[{name:"show",value:this.value}],style:h,class:c((t={round:i},t[n]=n,t["safe-area-inset-bottom"]=this.safeAreaInsetBottom,t)),on:{click:this.onClick}},[this.slots(),this.closeable&&e(s["a"],{attrs:{role:"button",tabindex:"0",name:this.closeIcon},class:c("close-icon",this.closeIconPosition),on:{click:this.close}})])])}}})},e58c:function(t,e,i){"use strict";var n=i("fc6a"),a=i("a691"),r=i("50c4"),s=i("a640"),o=i("ae40"),l=Math.min,c=[].lastIndexOf,h=!!c&&1/[1].lastIndexOf(1,-0)<0,u=s("lastIndexOf"),d=o("indexOf",{ACCESSORS:!0,1:0}),f=h||!u||!d;t.exports=f?function(t){if(h)return c.apply(this,arguments)||0;var e=n(this),i=r(e.length),s=i-1;for(arguments.length>1&&(s=l(s,a(arguments[1]))),s<0&&(s=i+s);s>=0;s--)if(s in e&&e[s]===t)return s||0;return-1}:c},fb78:function(t,e,i){}}]);
//# sourceMappingURL=Flow.30e809ef.js.map